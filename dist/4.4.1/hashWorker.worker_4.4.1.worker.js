(()=>{importScripts("https://cdnjs.cloudflare.com/ajax/libs/spark-md5/3.0.2/spark-md5.min.js");self.onmessage=async function(e){if(e.data.file&&"begin hash"==e.data.msg){const r=await(a=e.data.file,new Promise(((e,r)=>{var s=0,t=(performance.now(),a.size);const n=new FileReader,o=new SparkMD5.ArrayBuffer,d=2097152,i=Math.ceil(a.size/d);let l=0;n.onload=a=>{o.append(a.target.result),++l,l<i?c():e(o.end())},n.addEventListener("progress",(e=>{s+=e.loaded,Math.round(s/t*100)})),n.addEventListener("loadend",(e=>{e.total>0&&performance.now()})),n.onerror=()=>r(n.error);const c=()=>{const e=l*d,r=e+d>=a.size?a.size:e+d;n.readAsArrayBuffer(File.prototype.slice.call(a,e,r))};c()})));postMessage({status:"complete",hash:r})}var a}})();