"use strict";(this.webpackChunkcurate_js=this.webpackChunkcurate_js||[]).push([[96],{505:(e,t,r)=>{r.d(t,{VZ:()=>U,WH:()=>T,qy:()=>s});const s=(e,...t)=>({strings:e,values:t,htmlTemplate:!0}),n={focusPath:null,focusAttributes:null,setFocusAttributes(e){this.focusAttributes=e},setFocusPath(e){this.focusPath=e},getPathToElement(e){const t=[];for(;e&&e!==document.body;){const r=e.parentNode,s=Array.prototype.indexOf.call(r.children,e);t.unshift(s),e=r}return t},restoreFocus(){let e=document.body;for(const t of this.focusPath){if(!e||t>e.children.length)return;e=e.children[t]}e&&(e.focus(),this.focusAttributes?.forEach((t=>{"selectionStart"===t.name&&t.value>0&&(e.selectionStart=t.value)}))),this.focusAttributes=null}};let o=[];var i,a;i=200,a=2,setInterval((()=>{const e=o.length;e>=i&&((()=>{let e=0,t=0,r=0;o.forEach((s=>{e+=s.total,t+=s.deferred,r+=s.executed}));const s=o.reduce(((e,t)=>e+t.time),0)/o.length;console.log(`Status Report: ${o.length} reports, Total: ${e}, Deferred: ${t}, Executed: ${r}, Average time: ${s.toFixed(2)}ms`)})(),o.splice(0,e)),(()=>{const e=o.filter((e=>e.time>a));e.length>0&&(o=[],console.warn(`Performance Degradation Detected: ${e.length} reports exceeding ${a}ms`))})()}),5e3);const c=new class{constructor(e=150,t=10){this.primaryQueue=[],this.secondaryQueue=[],this.renderScheduled=!1,this.timeLimit=e,this.batchedUpdates=new Set,this.isBatchingUpdates=!1,this.componentUpdates=new Map,this.debounceTime=t,this.debounceTimer=null,this.componentSet=new Set}addPrimaryRender(e){this.componentSet.has(v)||(this.componentSet.add(v),this.batchedUpdates.add((()=>{e(),this.componentSet.delete(v)})),this.scheduleBatchedRender())}addSecondaryRender(e){this.secondaryQueue.push(e),this.scheduleBatchedRender()}scheduleBatchedRender(){this.isBatchingUpdates||(this.isBatchingUpdates=!0,Promise.resolve().then((()=>this.flushBatchedUpdates())))}flushBatchedUpdates(){this.primaryQueue=Array.from(this.batchedUpdates),this.batchedUpdates.clear(),this.componentSet.clear(),this.executeRenderImmediately(),this.isBatchingUpdates=!1}executeRenderImmediately(){const e=performance.now();let t=0;for(;this.primaryQueue.length>0&&performance.now()-e<this.timeLimit;){this.primaryQueue.shift()(),t++}const r=performance.now();o.push({total:t+this.primaryQueue.length,deferred:this.primaryQueue.length,executed:t,time:r-e}),(this.primaryQueue.length>0||this.secondaryQueue.length>0)&&this.scheduleRender()}scheduleRender(){this.renderScheduled||(this.renderScheduled=!0,requestAnimationFrame((()=>{this.executeTasks(this.primaryQueue,"primary"),this.executeTasks(this.secondaryQueue,"secondary"),this.renderScheduled=!1})))}executeTasks(e,t){const r=performance.now();let s=0;for(;e.length>0&&performance.now()-r<this.timeLimit;){e.shift()(),s++}const n=performance.now();o.push({total:s+e.length,deferred:e.length,executed:s,time:n-r,queueType:t}),e.length>0&&this.scheduleRender()}};class l{constructor(e){let t=e;this.subscribers=new Map,this.onUpdateSubscribers=new Set,this.prev=null,this.trim=()=>t.trim(),this.id=Math.random().toString(36).substring(2,10).trim(),this.map=e=>{const r=t.map(((t,r)=>e(t,r)));return r.every((e=>e&&e.htmlTemplate))?{get:()=>{const r=[];return t.forEach((t=>{const{strings:s,values:n}=e(t),o=v.processTemplate(s,n);r.push(o)})),r.join("")},isStateArray:!0}:r},this.read=e=>{const r=b();if(r){const e=v;this.subscribers.has(e)||this.subscribers.set(e,new Set),this.subscribers.get(e).add(r)}return t},this.onUpdate=e=>this.onUpdateSubscribers.add(e),this.write=(e,r,s)=>{this.prev=t,"function"==typeof e&&(e=e(t)),e!==t&&(t=e,c&&(this.subscribers.size>0&&c.addPrimaryRender((()=>{this.subscribers.forEach(((e,r)=>{e.forEach((e=>e(t,this.prev)))}))})),this.onUpdateSubscribers.size>0&&c.addSecondaryRender((()=>{this.onUpdateSubscribers.forEach((e=>e(t)))}))))},this.removeComponentSubscribers=e=>{this.subscribers.delete(e)},this[Symbol.toPrimitive]=e=>"string"===e?String(this.read()):"number"===e?Number(this.read()):this.read()}}const u=new WeakMap;let h=null;class d{constructor(e,t){this.fn=e,this.state=t}get(){return this.fn(this.state.read())}}const p=new Set,f=(e,t)=>{if(t&&"object"!=typeof t)throw new Error("Invalid argument: createState options must be an object.");if(t?.temporal&&"boolean"!=typeof t.temporal)throw new Error("Invalid createState temporal parameter: options.temporal must be boolean, got "+typeof t.temporal);if(t?.global&&"string"!=typeof t.global)throw new Error("Invalid createState global parameter: options.global must be the global ID as a string, got "+typeof t.global);const[r,s]=((e,t)=>{const r=new l(e),s=function(){return r.read()};s.state=r;const n=new Proxy(s,{apply:(e,t,r)=>e.apply(t,r),get(e,t,r){try{if(t===Symbol.toPrimitive)return e.state[Symbol.toPrimitive].bind(e.state);if("revert"===t)return e.state.write(e.state.prev),(...e)=>{if(1===e?.length&&"function"==typeof e[0])e[0]();else if(0!==e?.length)throw new Error("Invalid revert callback argument. Must be a function.")};if("valueOf"===t)return()=>e.state.read();if("state"===t)return e.state;const r=e.state.read();if("then"===t)return;if("trim"===t)return e.state.trim;if("onUpdate"===t)return e.state.onUpdate;if(r&&"object"==typeof r&&t in r){const s=e.state.read()[t];return"function"==typeof s?s.bind(r):s}return"toLowerCase"===t&&"string"==typeof r?()=>r.toLowerCase():t in e?e[t]:Reflect.get(...arguments)}catch(e){throw console.error("Error accessing property:",t,e),e}}});if(t){const e=t?.global;e&&(h=h||new Map,h.set(e,[n,e=>{r.write(e)}]),v&&(u.has(v)||u.set(v,new Set),u.get(v).add(e)))}return[n,e=>{r.write(e,n,t)}]})(e,t);return v&&!t?.global&&(v.localStates||(v.localStates=new Set),v.localStates.add(r.state)),p.has(r.state)||p.add(r.state),[r,s]};let m=null;const g=e=>{m=e},b=()=>m,y=e=>e instanceof l;let v=null;const E=e=>{v=e};const w={onEventRegex:/on\w+=("?)(?<!\w)$/,tagMatchRegex:/<([^\s>/]+)[^>]*$/,attributeMatchRegex:/\s(\w+)=/g,routeTagRegex:/<\/?(?:route|router)\b/g},S=new Map,T=(e,t)=>{class r extends HTMLElement{static usedPropIds=new Set;static elementPropMap=new WeakMap;static currentPropIds=new Set;constructor(){super(),this.routes=null,this.state=new Map,this.eventHandlers=new Map,this.onMountCallbacks=[],this.onUnMountCallbacks=[],this.isInitialRender=!0,this.psuedoStylesheet="",this.previousVdom=null,this.currentVdom=null,this.focusElement=null,this.historyLength=10,this.timeWalk=!1,this.strict=!1,this.sheet=new CSSStyleSheet,this.childContent=null,this.props={}}static checkProps(e){const t=e.getAttribute("air_props_id");t&&(e.props={...e.props,...S.get(t)},r.usedPropIds.add(t),r.elementPropMap.set(e,t),r.currentPropIds.add(t))}static scheduleCleanup(){requestAnimationFrame((()=>{r.cleanProps()}))}static cleanProps(){S.forEach(((e,t)=>{r.currentPropIds.has(t)||S.delete(t)})),r.usedPropIds.clear(),r.currentPropIds.clear()}static scheduleCleanup(){requestAnimationFrame((()=>{r.cleanProps()}))}checkInnerHTML(){if(this.innerHTML&&this.innerHTML.length>0){const e=[];Array.from(this.childNodes).forEach((t=>{if("#text"===t.nodeName){if(0===t.nodeValue.replace(/[\s\\]+/g,"").length)return;e.push(t.nodeValue)}else e.push(t)})),this.props.children=e}}connectedCallback(){this.checkInnerHTML(),document.adoptedStyleSheets=[...document.adoptedStyleSheets,this.sheet],E(this);const s=[],o=(e=>{const t=()=>{r(),g(t),e(),g(null)},r=()=>{m&&m.cleanup&&m.cleanup()};return t(),{cleanup:r}})((async()=>{if(E(this),r.checkProps(this),this.startTime=performance.now(),this.isInitialRender){const r=t.call(this,this.props);this.strict&&console.warn(`Strict Mode is enabled for component "${e}". All state variables must be invoked with parentheses (e.g., 'variable()') to ensure interactions with their actual values and not the proxy objects. This mode enforces strict syntax to prevent common proxy-related issues.`),this.template=r,this.isInitialRender=!1}let s=null;if(document.activeElement){const e=document.activeElement;s=n.getPathToElement(e),("INPUT"===e.tagName&&"text"===e.getAttribute("type")||"TEXTAREA"===e.tagName)&&n.setFocusAttributes([{name:"selectionStart",value:e.selectionStart}])}try{let e=null;e="function"==typeof this.template?this.template(this.props):this.template;let{strings:t,values:r}=e;this.eventHandlers.clear();const s=this.processTemplate(t,r);this.previousVdom?function(e,t){const r=document.createDocumentFragment(),s=document.createElement("div");s.innerHTML=t.replace(/\n/g,"");for(;s.firstChild;)s.firstChild.nodeType!==Node.TEXT_NODE||""!==s.firstChild.nodeValue.trim()?r.appendChild(s.firstChild):s.removeChild(s.firstChild);const n=e.cloneNode(!1);Array.from(r.childNodes).forEach((e=>n.appendChild(e)));const o=n;P(o),P(e);const i=e=>e.tagName?.includes("-");function a(e,t){const r=e.attributes,s=t.attributes;let n=!1;for(let t=0;t<s.length;t++){const r=s[t];e.getAttribute(r.name)!==r.value&&(e.setAttribute(r.name,r.value),n=!0)}for(let s=0;s<r.length;s++){const o=r[s];t.hasAttribute(o.name)||(e.removeAttribute(o.name),n=!0)}return n}function c(e,t,r=!1){if(e.nodeType===Node.TEXT_NODE&&""===e.nodeValue.trim())return;if(e.nodeType===Node.TEXT_NODE&&t.nodeType===Node.TEXT_NODE)return void(e.nodeValue!==t.nodeValue&&(e.nodeValue=t.nodeValue));const s=i(e),n=i(t);if(!r&&(s||n)){if(e.nodeName===t.nodeName){if(e.getAttribute("air_props_id")){if(S.get(e.getAttribute("air_props_id"))!==S.get(t.getAttribute("air_props_id"))){const r=x(t.nodeName);a(r,t),e.parentNode.replaceChild(r,e),I(e)}else a(e,t)}return}{const r=x(t.nodeName);return a(r,t),e.parentNode.replaceChild(r,e),void I(e)}}if(e.nodeName!==t.nodeName){const r=t.cloneNode(!0);return e.parentNode.replaceChild(r,e),void(e.nodeType===Node.ELEMENT_NODE&&I(e))}if(e.nodeType===Node.ELEMENT_NODE){if(!a(e,t)&&!e.firstChild&&!t.firstChild)return}const o=e.childNodes,l=t.childNodes;let u=0,h=0;for(;h<l.length;){const t=l[h];if(u>=o.length)e.appendChild(t.cloneNode(!0)),h++;else{const r=o[u];r.nodeName===t.nodeName?(c(r,t),u++,h++):(e.insertBefore(t.cloneNode(!0),r),h++)}}for(;o.length>l.length;){const t=e.lastChild;e.removeChild(t),t.nodeType===Node.ELEMENT_NODE&&I(t)}}c(e,o,!0)}(this,s):this.innerHTML=s,this.attachEventListeners(),this.previousVdom=s}catch(e){console.error("Error in component rendering:",e)}this.endTime=performance.now(),n.setFocusPath(s),n.restoreFocus(),r.scheduleCleanup()}));s.push(o),this.cleanupEffects=s,this.triggerOnMount()}cleanupComponentDomPool(){this.querySelectorAll("*").forEach((e=>{const t=e.tagName.toLowerCase(),r=C.get(t);if(r){const t=r.indexOf(e);-1!==t&&r.splice(t,1)}}))}removeUnnecessaryWhitespace(e){return e=(e=(e=(e=(e=e.replace(/>\s+</g,"><")).split("\n").map((e=>e.trim())).join("")).replace(/\s{2,}/g," ")).replace(/\s+\/>/g,"/>")).replace(/<\s+/g,"<").replace(/\s+>/g,">")}attachEventListeners(){this.eventHandlers.forEach(((e,t)=>{let r=this.querySelector(`[${t}]`);e.forEach((e=>{if(r)try{r[e.event]=e.handler}catch(e){console.log("error in event handler: ",e)}}))}))}disconnectedCallback(){document.adoptedStyleSheets=document.adoptedStyleSheets.filter((e=>e!==this.sheet)),this.eventHandlers.clear(),this.cleanupGlobalState(),this.state.clear(),this.previousVdom=null,this.currentVdom=null,this.focusElement=null,this.childContent=null,this.props=null,this.eventHandlers.forEach(((e,t)=>{const r=this.querySelector(`[air_event_id="${t}"]`);r&&e.forEach((e=>{r[e.event]=null}))})),this.eventHandlers.clear(),this.cleanupEffects&&this.cleanupEffects.forEach((e=>e.cleanup&&e.cleanup())),this.cleanupComponentDomPool(),this.cleanupSubscribers(),this.triggerOnUnMount(),this.cleanupEffects=null;const e=r.elementPropMap.get(this);e&&(r.elementPropMap.delete(this),r.currentPropIds.delete(e)),p.forEach((e=>{e.removeComponentSubscribers(this),0===e.subscribers.size&&p.delete(e)}))}cleanupSubscribers(){if(u.has(this)){u.get(this).forEach((e=>{const[t]=h.get(e);t.state.removeComponentSubscribers(this)})),u.delete(this)}this.localStates&&(this.localStates.forEach((e=>{e.removeComponentSubscribers(this)})),this.localStates.clear(),this.localStates=null)}cleanupGlobalState(){if(u.has(this)){u.get(this).forEach((e=>{if(h&&h.has(e)){let t=!1;if(!u.entries||0===u.entries?.length)return;for(const[r,s]of u.entries())if(r!==this&&s.has(e)){t=!0;break}t||h.delete(e)}})),u.delete(this)}}updateStyles(e){this.sheet.insertRule(e)}triggerOnUnMount=()=>{this.onUnMountCallbacks.length>0&&this.onUnMountCallbacks.forEach((e=>e()))};triggerOnMount=()=>{this.onMountCallbacks.length>0&&this.onMountCallbacks.forEach((e=>{const t=e();if(t&&"function"==typeof t)this.onUnMountCallbacks.push(t);else if(t&&"function"!=typeof t)throw new Error("Invalid onMount callback. Expected function, got: "+typeof t)}))};processTemplate(e,t){const r=e=>"object"==typeof e&&e&&e.htmlTemplate,s=e=>"object"==typeof e&&e&&e.$AirCss,n=(e,t,r,s)=>{const n=M(e,"air_event_id"),o=n||Math.random().toString(36).substring(2,10).trim(),i=`air_event_id="${o}"`,a=this.eventHandlers.get(i)||[];return this.eventHandlers.set(i,[...a,{event:r,handler:t}]),e=e.substring(0,e.length-(r.length+2)),n||(e+=` air_event_id="${o}"`),s.match(/^['"]/)&&(e=e.trim().replace(/['"]$/,"")),e},o=(e,t,n,o)=>{if(y(t?.state))return e+t();let i=t();if(s(i)){const t=`air-css-${Math.random().toString(36).substring(2,10).trim()}`,r=i.$AirCss(t);return r.psuedo&&(e=a(e,t)),e+r.styles}return i&&r(i)?e+this.processTemplate(i.strings,i.values):e+i},i=(e,t)=>{const r=[];return c(t,(e=>{e.htmlTemplate?r.push(this.processTemplate(e.strings,e.values)):e instanceof HTMLElement?r.push(e.outerHTML):r.push(e)})),e+r.join("")};function a(e,t){const r=e.lastIndexOf("<");if(-1===r)return e;const s=e.slice(0,r),n=e.slice(r);return n.includes("class=")?s+n.replace(/class=["']?([^"']*)["']?/,`class="$1 ${t}"`):s+n.replace(/^<(\w+)/,`<$1 class="${t}"`)}const c=(e,t)=>{e.forEach((e=>{Array.isArray(e)?c(e,t):t(e)}))},l=(e,t,c,l,u,h)=>{if(y(t))return e+t.read;if(t&&!0===t.isStateArray)return e+t.get();if(y(t)||(e=>e instanceof d)(t))return e+t.get();if(r(t))return e+this.processTemplate(t.strings,t.values);if(((e,t)=>"function"==typeof e&&w.onEventRegex.test(t))(t,c))return n(e,t,u,h);if("function"==typeof t){return o(e,t)}if(Array.isArray(t))return i(e,t);if(((e,t)=>"object"==typeof e&&t.endsWith("props="))(t,c))return((e,t,r,s)=>{r.includes("<")||(r=s+r);const n=r.match(w.tagMatchRegex);let o=n?n[1]:null;if(o||(o=e.match(w.tagMatchRegex)[1]),void 0!==customElements.get(o)||"route"===o||"router"===o){const r=M(e,"air_props_id")||Math.random().toString(36).substring(2,10).trim(),s=`air_props_id="${r}"`;if(S.get(r))throw new Error("cannot initialise more than one properties object on a component.");if("object"!=typeof t)throw new Error("Invalid props object. Expected object, got: "+typeof t);return S.set(r,t),e.replace("props=",s)}return e})(e,t,c,l);if(s(t)){const r=`air-css-${Math.random().toString(36).substring(2,10).trim()}`,s=t.$AirCss(r);return s.psuedo&&(e=a(e,r)),e+s.styles}return"object"==typeof t?t instanceof HTMLElement?e+t.outerHTML:e+JSON.stringify(t):e+t};return e.reduce(((r,s,n)=>{let o=r+s;if(n>=t.length)return o;const i=t[n],a=s.match(w.attributeMatchRegex),c=a?a[a.length-1].trim().split("=")[0]:null;return l(o,i,s,e[n-1],c,e[n+1])}),"").replace(w.routeTagRegex,(e=>{switch(e){case"<route":return"<air-route";case"</route":return"</air-route";case"<router":return"<air-router";case"</router":return"</air-router";default:return e}}))}}const s=function(e,t=!1){const r=/const \[([a-zA-Z0-9_]+),/g;let s,n=[];for(;null!==(s=r.exec(e));)n.push(s[1]);let o={};return n.forEach((r=>{const n=new RegExp(`\\b${r}\\b(?!\\()`,"g");let i=!0,a=[];for(;null!==(s=n.exec(e));){if(i){i=!1;continue}const n=s.index,o=n+r.length,c=e.slice(o).trimStart(),l=c[0];let u=!0;t?u="("===l:(u=!/\s*(\?|&&|\|\||==|!=)/.test(c),/[\+\-\*\/]/.test(c.trim()[0])&&(u=!0));let h=e.lastIndexOf("\n",n-1)+1,d=e.indexOf("\n",n);-1===d&&(d=e.length);let p=e.substring(h,d);a.push({position:n,valid:u,snippet:p})}o[r]=a})),o}(t.toString(),t.strict);return function(e,t){Object.entries(e).forEach((([e,r])=>{r.forEach((r=>{t?console.error(`Error: Detected uninvoked proxy. Proxies must be invoked on every access in strict mode. (Position ${r.position}): ${r.snippet}`):console.warn(`Warning: Uninvoked proxy usage detected with ${e}. Proxies should be invoked in logical and equality operations to ensure correct behavior. (Position ${r.position}): ${r.snippet}`)}))}))}(Object.fromEntries(Object.entries(s).map((([e,t])=>[e,t.filter((e=>!e.valid))]))),t.strict),customElements.get(e)?console.log("component ",e," already defined."):customElements.define(e,r),t};function M(e,t){const r=e.split(/<(?!.*<)/),s=r[r.length-1]||"",n=new RegExp(`${t}="([^"]*)"`),o=s.match(n);return o?o[1]:null}const N=100,C=new Map;function x(e){C.has(e)||C.set(e,[]);return C.get(e).pop()||document.createElement(e)}function I(e){e.removeAttribute("key"),e.innerHTML="";const t=e.cloneNode(!1),r=t.tagName.toLowerCase(),s=C.get(r)||[];s.length<N&&(s.push(t),C.set(r,s))}function P(e){[...e.childNodes].forEach((e=>{3!==e.nodeType||e.nodeValue.trim()?1===e.nodeType&&P(e):e.remove()}))}let A=[];const[$,k]=f(window.location.pathname),R=e=>{e.preventDefault();const t=e.target.getAttribute("href");window.history.pushState({},"",t),k(t)};T("air-router",(function(e){window.addEventListener("popstate",(()=>{k(window.location.pathname)}));const t=()=>{const e=function(e){for(let t of A){let r=[t.path];t.aliases&&(r=r.concat(t.aliases));for(let s of r){const r=s.split("/"),n=e.split("/");if(r.length!==n.length)continue;let o=!0,i={};for(let e=0;e<r.length;e++)if(r[e].startsWith(":"))i[r[e].substring(1)]=n[e];else if(r[e]!==n[e]&&"*"!==r[e]){o=!1;break}if(o)return{...t,params:i}}}return null}($())||A.find((e=>"*"===e.path));if("string"!=typeof e.component)throw new Error(`Invalid route component. Expected string, got: ${typeof e.component}, please use the registered name of the component.`);return e};return()=>{const r=t(),n=r&&r.component?r.component:"",o=r?r.params:{};return s`
         <${n} props=${{RouteParams:o,RouterProps:e}}></${n}>

    `}})),T("air-route",(function(e){return()=>s`
    <a href="${this.getAttribute("href")}" onclick="${R}">${e.children}</a>
  `}));const _=new class{constructor(){this.queries=new Map,this.queryIntervals=new WeakMap}setQuery(e,t,r={}){const{cacheTime:s=3e5,staleTime:n=0}=r;this.queries.set(e,{data:t,timestamp:Date.now(),cacheTime:s,staleTime:n})}getQuery(e){const t=this.queries.get(e);if(!t)return null;return Date.now()-t.timestamp>t.cacheTime?(this.queries.delete(e),null):t}invalidateQueries(e){for(const[t,r]of this.queries.entries())e(r,t)&&this.queries.delete(t)}clear(){this.queries.clear()}setQueryInterval(e,t,r){this.queryIntervals.has(e)||this.queryIntervals.set(e,new Map),this.queryIntervals.get(e).set(t,r)}clearQueryIntervals(e){const t=this.queryIntervals.get(e);t&&(t.forEach((e=>clearInterval(e))),this.queryIntervals.delete(e))}},U=(e,t,r={})=>{const{cacheTime:s=3e5,staleTime:n=0,refetchInterval:o}=r,[i,a]=f(null),[c,l]=f(!0),[u,h]=f(null),d=async(r=!1)=>{r||l(!0),h(null);try{const r=await t();a(r),_.setQuery(e,r,{cacheTime:s,staleTime:n})}catch(e){h(e)}finally{l(!1)}},p=_.getQuery(e);if(p?(a(p.data),l(!1),Date.now()-p.timestamp>p.staleTime&&d(!0)):d(),o){const t=setInterval((()=>d(!0)),o);_.setQueryInterval(v,e,t),(e=>{if(!e||"function"!=typeof e)throw new Error("Invalid onMount function. Expected function, got: "+typeof e);v.onUnMountCallbacks.push(e)})((()=>{clearInterval(t),_.clearQueryIntervals(v)}))}return{data:i,isLoading:c,error:u,refetch:()=>d(!0)}}}}]);