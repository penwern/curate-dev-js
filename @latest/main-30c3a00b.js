/*! For license information please see main-30c3a00b_4.4.1.js.LICENSE.txt */
(this.webpackChunkcurate_js=this.webpackChunkcurate_js||[]).push([[323],{2251:()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||r(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw a}}}}function r(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function a(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,n||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}const c=function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.poolSize=t,this.workers=new Map,this.taskQueue=[],this.currentTasks=new Map},(r=[{key:"initWorker",value:function(){var e=this,t=new Worker("/workers/hashWorker.js"),n=crypto.randomUUID();return t.onmessage=function(r){if("complete"===r.data.status){var o=e.currentTasks.get(n);o&&(o.resolve({file:o.file,hash:r.data.hash,name:o.file.name}),e.currentTasks.delete(n)),e.processNextTask(n,t)}},t.onerror=function(r){var o=e.currentTasks.get(n);o&&(o.reject("Worker error: "+r.message),e.currentTasks.delete(n)),e.processNextTask(n,t)},this.workers.set(n,t),n}},{key:"generateChecksum",value:function(e){var r=this;return new Promise((function(o,i){var a={file:e,resolve:o,reject:i};if(r.taskQueue.push(a),r.taskQueue.length>r.workers.size&&r.workers.size<r.poolSize){var c=r.initWorker();r.processNextTask(c,r.workers.get(c))}else if(r.workers.size>0){var s,l=n(r.workers);try{for(l.s();!(s=l.n()).done;){var u=t(s.value,2),d=u[0],f=u[1];if(!r.currentTasks.has(d)){r.processNextTask(d,f);break}}}catch(e){l.e(e)}finally{l.f()}}}))}},{key:"processNextTask",value:function(e,t){if(this.taskQueue.length>0){var n=this.taskQueue.shift();this.currentTasks.set(e,n),t.postMessage({file:n.file,msg:"begin hash"})}else 0===this.currentTasks.size&&this.cleanupWorkers()}},{key:"cleanupWorkers",value:function(){var e,r=n(this.workers);try{for(r.s();!(e=r.n()).done;){var o=t(e.value,2);o[0],o[1].terminate()}}catch(e){r.e(e)}finally{r.f()}this.workers.clear()}},{key:"terminate",value:function(){this.cleanupWorkers(),this.taskQueue=[],this.currentTasks.clear()}}])&&i(e.prototype,r),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,o}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(){l=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var i=t&&t.prototype instanceof b?t:b,a=Object.create(i.prototype),c=new A(r||[]);return o(a,"_invoke",{value:T(e,n,c)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var h="suspendedStart",m="suspendedYield",y="executing",v="completed",g={};function b(){}function w(){}function x(){}var E={};d(E,a,(function(){return this}));var k=Object.getPrototypeOf,C=k&&k(k(N([])));C&&C!==n&&r.call(C,a)&&(E=C);var L=x.prototype=b.prototype=Object.create(E);function S(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(o,i,a,c){var l=p(e[o],e,i);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==s(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,c)}))}c(l.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function T(t,n,r){var o=h;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var s=P(c,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=y;var l=p(t,n,r);if("normal"===l.type){if(o=r.done?v:m,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=v,r.method="throw",r.arg=l.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=p(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(s(t)+" is not iterable")}return w.prototype=x,o(L,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:w,configurable:!0}),w.displayName=d(x,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,d(e,u,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},S(_.prototype),d(_.prototype,c,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new _(f(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(L),d(L,u,"Generator"),d(L,a,(function(){return this})),d(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function u(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){u(i,r,o,a,c,"next",e)}function c(e){u(i,r,o,a,c,"throw",e)}a(void 0)}))}}function f(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length;n+=2)t[n/2]=parseInt(e.substr(n,2),16);return t}function p(e,t,n){var r={MetaDatas:[{NodeUuid:e,Namespace:t,JsonValue:JSON.stringify(n),Policies:[{Action:"READ",Effect:"allow",Subject:"*"},{Action:"WRITE",Effect:"allow",Subject:"*"}]}],Operation:"PUT"};Curate.api.fetchCurate("/a/user-meta/update","PUT",r),console.log("Attempted to update metadata '".concat(t,"' for UUID ").concat(e))}function h(e,t,n){Curate.api.fetchCurate("/a/tree/stats","POST",{NodePaths:[e]}).then((function(r){var o=r.Nodes.find((function(t){return t.Path===e}));o?function(e,t,n,r){var o=3,i=2e3;"temporary"===e.Etag&&r<o?(console.log("Checksum temporary for ".concat(n,". Retrying (").concat(r+1,"/").concat(o,")...")),setTimeout((function(){h(n,t,r+1)}),i)):e.Etag===t?(console.log("Checksum validation passed for ".concat(n,".")),p(e.Uuid,"usermeta-file-integrity","✓ Integrity verified")):(console.error("Checksum validation FAILED for ".concat(n,"."),"Expected:",t,"Received:",e.Etag,"(Attempt ".concat(r+1,")")),p(e.Uuid,"usermeta-file-integrity","X Integrity compromised"))}(o,t,e,n):console.error("Node not found in stats response:",e)})).catch((function(t){console.error("Error fetching node stats:",t,e)}))}window.addEventListener("load",(function(){d(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!=typeof UploaderModel&&UploaderModel.UploadItem){e.next=5;break}return e.next=3,new Promise((function(e){return setTimeout(e,100)}));case 3:e.next=0;break;case 5:t=new c,console.log("WorkerManager initialized"),n=UploaderModel.UploadItem.prototype.uploadPresigned,UploaderModel.UploadItem.prototype.uploadPresigned=function(){var e=this,r=n.apply(this,arguments),o=PydioApi.getMultipartThreshold(),i=PydioApi.getMultipartPartSize(),a=function(){var n=d(l().mark((function n(r){var c,s,u,d,p,m,y,v,g,b,w,x,E,k,C,L,S,_,T,P,j,O,A,N,I,q;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("loaded"!==r){n.next=58;break}if(e._observers&&e._observers.status&&(c=e._observers.status.indexOf(a))>-1&&e._observers.status.splice(c,1),n.prev=2,!(e._file.size>o)){n.next=31;break}console.log("File exceeds multipart threshold, generating part checksums for:",e._label),u=i,d=Math.ceil(e._file.size/u),p=[],m=new Uint8Array(16*d),y=0;case 10:if(!(y<d)){n.next=23;break}return v=y*u,g=Math.min(v+u,e._file.size),b=e._file.slice(v,g),n.next=16,t.generateChecksum(b);case 16:w=n.sent,p.push(w.hash),x=f(w.hash),m.set(x,16*y);case 20:y++,n.next=10;break;case 23:return E=new Blob([m]),n.next=26,t.generateChecksum(E);case 26:k=n.sent,s="".concat(k.hash,"-").concat(d),console.log("Generated multipart checksum:",s,"Parts:",d),n.next=37;break;case 31:return console.log("File below multipart threshold, generating single checksum for:",e._label),n.next=34,t.generateChecksum(e._file);case 34:C=n.sent,s=C.hash,console.log("Generated single checksum:",s);case 37:L=Curate.workspaces.getOpenWorkspace(),S=e._targetNode._path,_=e._file.webkitRelativePath,T=e._label,P=L.endsWith("/")?L:L+"/",j="",S&&"/"!==S&&(j=S.replace(/^\/+|\/+$/g,"")),O="",_?(-1!==(A=_.lastIndexOf("/"))?(N=_.substring(0,A+1),O=N+T):O=T,O.startsWith("/")&&(O=O.substring(1))):O=T,I=P,j&&(I+=j+"/"),I=(I+=O).replace(/\/+/g,"/"),console.log("Constructed final path for stats API:",I),q=Math.min(5e3,Math.max(500,.01*e._file.size)),setTimeout((function(){h(I,s,0)}),q),n.next=58;break;case 55:n.prev=55,n.t0=n.catch(2),console.error("Client-side checksum generation or path construction failed:",n.t0);case 58:case"end":return n.stop()}}),n,null,[[2,55]])})));return function(e){return n.apply(this,arguments)}}();return this._observers||(this._observers={}),this._observers.status||(this._observers.status=[]),this._observers.status.includes(a)||this._observers.status.push(a),r};case 9:case"end":return e.stop()}}),e)})))()}))},5702:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(){a=function(){return t};var e,t={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",l=c.asyncIterator||"@@asyncIterator",u=c.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var o=t&&t.prototype instanceof b?t:b,a=Object.create(o.prototype),c=new A(r||[]);return i(a,"_invoke",{value:T(e,n,c)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var h="suspendedStart",m="suspendedYield",y="executing",v="completed",g={};function b(){}function w(){}function x(){}var E={};d(E,s,(function(){return this}));var k=Object.getPrototypeOf,C=k&&k(k(N([])));C&&C!==n&&o.call(C,s)&&(E=C);var L=x.prototype=b.prototype=Object.create(E);function S(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(i,a,c,s){var l=p(e[i],e,a);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==r(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,c,s)}),(function(e){n("throw",e,c,s)})):t.resolve(d).then((function(e){u.value=e,c(u)}),(function(e){return n("throw",e,c,s)}))}s(l.arg)}var a;i(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function T(t,n,r){var o=h;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var s=P(c,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=y;var l=p(t,n,r);if("normal"===l.type){if(o=r.done?v:m,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=v,r.method="throw",r.arg=l.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=p(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(o.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(r(t)+" is not iterable")}return w.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:w,configurable:!0}),w.displayName=d(x,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,d(e,u,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},S(_.prototype),d(_.prototype,l,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new _(f(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(L),d(L,u,"Generator"),d(L,s,(function(){return this})),d(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=o.call(a,"catchLoc"),l=o.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function c(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){c(i,r,o,a,s,"next",e)}function s(e){c(i,r,o,a,s,"throw",e)}a(void 0)}))}}var l,u,d,f;const p={fetchCurate:(f=s(a().mark((function e(t){var n,r,o,i,c,s,l=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:"POST",r=l.length>2?l[2]:void 0,t){e.next=4;break}throw new Error("No endpoint provided");case 4:return e.prev=4,e.next=7,PydioApi._PydioRestClient.getOrUpdateJwt();case 7:return o=e.sent,i={method:n,headers:{accept:"application/json","accept-language":navigator.language+",en-GB,en-US;q=0.9,en;q=0.8",authorization:"Bearer "+o,"content-type":"application/json","sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-origin","x-pydio-language":pydio.user.getPreference("lang")},referrer:window.location.href,referrerPolicy:"strict-origin-when-cross-origin",mode:"cors",credentials:"include"},["GET","HEAD"].includes(n)||(i.body=JSON.stringify(r)),e.next=12,fetch(window.location.origin+t,i);case 12:if((c=e.sent).ok){e.next=15;break}throw new Error("Network response was not ok");case 15:return e.next=17,c.json();case 17:return s=e.sent,e.abrupt("return",s);case 21:throw e.prev=21,e.t0=e.catch(4),console.error("Curate fetch error:",e.t0),e.t0;case 25:case"end":return e.stop()}}),e,null,[[4,21]])}))),function(e){return f.apply(this,arguments)}),files:{createFiles:(d=s(a().mark((function e(t){var n,r,i,c,l,u,d,f,p,h;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=function(){return r=s(a().mark((function e(t,n){var r,o,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={MetaDatas:[],Operation:"PUT"},o=a().mark((function e(o){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"path"!==o&&t[o].forEach((function(e){var t="usermeta-".concat(o,"-").concat(e.field),i={NodeUuid:n,Namespace:t,JsonValue:JSON.stringify(e.value),Policies:[{Action:"READ",Effect:"allow",Subject:"*"},{Action:"WRITE",Effect:"allow",Subject:"*"}]};r.MetaDatas.push(i)}));case 1:case"end":return e.stop()}}),e)})),e.t0=a().keys(t);case 3:if((e.t1=e.t0()).done){e.next=8;break}return i=e.t1.value,e.delegateYield(o(i),"t2",6);case 6:e.next=3;break;case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)},n=function(e,t){return r.apply(this,arguments)},t){e.next=4;break}throw new Error("No nodes provided");case 4:return i=t.nodes.map(function(){var e=s(a().mark((function e(t){var n,r,o,i,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.path.split("/").pop(),e.next=3,Curate.api.fetchCurate("/a/tree/create","POST",{Nodes:[{Path:t.path,Type:"LEAF"}],TemplateUUID:""});case 3:return r=e.sent,o=r.Children[0].Path,e.next=7,Curate.api.fetchCurate("/a/meta/bulk/get","POST",{Limit:200,NodePaths:[o]});case 7:return i=e.sent,c=i.Nodes[0].Uuid,e.abrupt("return",{filename:n,uuid:c,node:t});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=7,Promise.all(i);case 7:c=e.sent,l=o(c),e.prev=9,l.s();case 11:if((u=l.n()).done){e.next=21;break}return(d=u.value).filename,f=d.uuid,p=d.node,e.next=15,n(p,f);case 15:return h=e.sent,e.next=18,Curate.api.fetchCurate("/a/user-meta/update","PUT",h);case 18:e.sent;case 19:e.next=11;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(9),l.e(e.t0);case 26:return e.prev=26,l.f(),e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[9,23,26,29]])}))),function(e){return d.apply(this,arguments)}),getFileData:(u=s(a().mark((function e(t){var n,r,o,i=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:"text",t){e.next=3;break}throw new Error("No node provided");case 3:return e.prev=3,e.next=6,PydioApi._PydioRestClient.getOrUpdateJwt();case 6:return e.sent,e.next=9,pydio.ApiClient.buildPresignedGetUrl(t);case 9:return r=e.sent,e.next=12,fetch(r);case 12:if((o=e.sent).ok){e.next=15;break}throw new Error("Network response was not ok");case 15:e.t0=n,e.next="text"===e.t0?18:21;break;case 18:return e.next=20,o.text();case 20:data=e.sent;case 21:return e.abrupt("return",data);case 24:throw e.prev=24,e.t1=e.catch(3),console.error("Error fetching object:",e.t1),e.t1;case 28:case"end":return e.stop()}}),e,null,[[3,24]])}))),function(e){return u.apply(this,arguments)}),updateMetadata:(l=s(a().mark((function e(t,n){var r,o,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}throw new Error("No metadata provided");case 2:if(t){e.next=4;break}throw new Error("No node provided");case 4:return r=function(e,t){var n={MetaDatas:[],Operation:"PUT"},r=function(r){t[r].forEach((function(t){var o="usermeta-".concat(r,"-").concat(t.field),i={NodeUuid:e._metadata.get("uuid"),Namespace:o,JsonValue:JSON.stringify(t.value),Policies:[{Action:"READ",Effect:"allow",Subject:"*"},{Action:"WRITE",Effect:"allow",Subject:"*"}]};n.MetaDatas.push(i)}))};for(var o in t)r(o);return n},o=r(t,n),e.next=8,Curate.api.fetchCurate("/a/user-meta/update","PUT",o);case 8:return i=e.sent,e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)}))),function(e,t){return l.apply(this,arguments)})}};const h={getOpenWorkspace:function(){return pydio._dataModel._rootNode._label.toLowerCase()==pydio.user.id.toLowerCase()?"personal-files":pydio._dataModel._rootNode._label.toLowerCase().replace(/^\d+\.\s*/,"")}};var m=n(4904);const y=function(e){var t={"ISAD(G)":({},{sections:[{title:"Identity Statement",fields:["reference code(s)","title","date(s)","level of description","extent and medium of the unit of description"]},{title:"Context",fields:["name of creator(s)","administrative/biographical history","archival history","immediate source of acquisition or transfer"]},{title:"Content And Structure",fields:["scope and content","appraisal, destruction and scheduling information","accruals","system of arrangement"]},{title:"Conditions Of Access And Use",fields:["conditions governing access","conditions governing reproduction","language/scripts of material","physical characteristics and technical requirements","finding aids"]},{title:"Allied Materials",fields:["existence and location of originals","existence and location of copies","related units of description","publication note"]},{title:"Notes",fields:["note"]},{title:"Description Control",fields:["archivists note","rules or conventions","date(s) of descriptions"]}]}),DC:({},{fields:["contributor","coverage","creator","date","description","format","identifier","language","publisher","relation","rights","source","subject","title","type"]})};return e&&e in t?t[e]:e?void console.error("invalid schema"):t};const v={schemas:{getSchemas:function(e){return y(e)}}};var g={context:{page:window.location.pathname,lastRightClickedElement:null,selection:null}};function b(e){var t;2===e.button&&(g.context.lastRightClickedElement=e.target,g.context.page=window.location.pathname,g.context.selection=(null===(t=pydio)||void 0===t?void 0:t._dataModel._selectedNodes)||null)}window.addEventListener("load",(function(){return document.addEventListener("mousedown",b)}));const w=g;var x={api:p,workspaces:h,ui:m.A,metadata:v,contextualHelp:w};window.Curate=x},4904:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r={modals:{curatePopup:function(e,t){var n=e.title,r=e.message,o=e.type,i=e.content,a=e.buttonType||"close",c=(null==t?void 0:t.afterLoaded)||function(){},s=(null==t?void 0:t.afterClosed)||function(){},l=(null==t?void 0:t.onOk)||function(){},u=(null==t?void 0:t.onCancel)||function(){},d={warning:{color:"#FFA500",icon:"mdi-alert"},error:{color:"#FF0000",icon:"mdi-alert-circle"},success:{color:"#008000",icon:"mdi-check-circle"},info:{color:"#0000FF",icon:"mdi-information"}};return{fire:function(){var e=document.createElement("div");e.classList.add("config-modal-container"),e.style.display="flex",e.addEventListener("click",(function(t){k(t,e)}),{once:!0});var t=document.createElement("div");t.classList.add("config-modal-content"),o&&(t.style.borderTop="4px solid ".concat(d[o].color));var f=document.createElement("div");if(f.classList.add("config-popup-title"),o){var p=document.createElement("i");p.classList.add("mdi",d[o].icon),p.style.color=d[o].color,p.style.fontSize="24px",p.style.marginRight="10px",f.appendChild(p)}var h=document.createTextNode(n);f.appendChild(h);var m=document.createElement("div");if(m.classList.add("config-main-options-container"),m.style.width="100%",r){var y=document.createElement("div");y.classList.add("config-popup-message"),y.textContent=r,m.appendChild(y)}if(i){var v=document.createElement("div");v.innerHTML=i,m.appendChild(v)}var g=document.createElement("div");if(g.classList.add("action-buttons"),"okCancel"===a){var b=document.createElement("button");b.classList.add("config-modal-ok-button"),b.textContent="OK",b.addEventListener("click",(function(){l(),E(e)}));var w=document.createElement("button");w.classList.add("config-modal-cancel-button"),w.textContent="Cancel",w.addEventListener("click",(function(){u(),E(e)})),g.appendChild(b),g.appendChild(w)}else{var x=document.createElement("button");x.classList.add("config-modal-close-button"),x.textContent="Close",x.addEventListener("click",(function(){E(e)})),g.appendChild(x)}function E(e){e.remove(),s()}function k(e,t){e.target===t?E(t):t.addEventListener("click",(function(e){k(e,t)}),{once:!0})}t.appendChild(f),t.appendChild(m),t.appendChild(g),e.appendChild(t),document.body.appendChild(e),e.addEventListener("keyup",(function(e){e.stopPropagation()})),c(e)}}}}}},8258:()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(){"use strict";t=function(){return r};var n,r={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",l=c.asyncIterator||"@@asyncIterator",u=c.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(n){d=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var o=t&&t.prototype instanceof b?t:b,i=Object.create(o.prototype),c=new A(r||[]);return a(i,"_invoke",{value:T(e,n,c)}),i}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}r.wrap=f;var h="suspendedStart",m="suspendedYield",y="executing",v="completed",g={};function b(){}function w(){}function x(){}var E={};d(E,s,(function(){return this}));var k=Object.getPrototypeOf,C=k&&k(k(N([])));C&&C!==o&&i.call(C,s)&&(E=C);var L=x.prototype=b.prototype=Object.create(E);function S(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function _(t,n){function r(o,a,c,s){var l=p(t[o],t,a);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==e(d)&&i.call(d,"__await")?n.resolve(d.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):n.resolve(d).then((function(e){u.value=e,c(u)}),(function(e){return r("throw",e,c,s)}))}s(l.arg)}var o;a(this,"_invoke",{value:function(e,t){function i(){return new n((function(n,o){r(e,t,n,o)}))}return o=o?o.then(i,i):i()}})}function T(e,t,r){var o=h;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:n,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var s=P(c,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=y;var l=p(e,t,r);if("normal"===l.type){if(o=r.done?v:m,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=v,r.method="throw",r.arg=l.arg)}}}function P(e,t){var r=t.method,o=e.iterator[r];if(o===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=n,P(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=p(o,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,g;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,g):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,g)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function e(){for(;++o<t.length;)if(i.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=n,e.done=!0,e};return a.next=a}}throw new TypeError(e(t)+" is not iterable")}return w.prototype=x,a(L,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:w,configurable:!0}),w.displayName=d(x,u,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,d(e,u,"GeneratorFunction")),e.prototype=Object.create(L),e},r.awrap=function(e){return{__await:e}},S(_.prototype),d(_.prototype,l,(function(){return this})),r.AsyncIterator=_,r.async=function(e,t,n,o,i){void 0===i&&(i=Promise);var a=new _(f(e,t,n,o),i);return r.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(L),d(L,u,"Generator"),d(L,s,(function(){return this})),d(L,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},r.values=N,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,o){return c.type="throw",c.arg=e,t.next=r,o&&(t.method="next",t.arg=n),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:N(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),g}},r}function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw a}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function c(e){o(a,r,i,c,s,"next",e)}function s(e){o(a,r,i,c,s,"throw",e)}c(void 0)}))}}function a(){return(a=i(t().mark((function e(n){var r,o,i,a,c;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,PydioApi._PydioRestClient.getOrUpdateJwt();case 2:r=e.sent,o="".concat(window.location.origin,"/a/scheduler/hooks/a3m-transfer"),i=pydio._dataModel._selectedNodes.map((function(e){return{path:Curate.workspaces.getOpenWorkspace()+e._path,slug:e._metadata.get("usermeta-atom-linked-description")||""}})),a=JSON.stringify({Paths:i,JobParameters:{ConfigId:n.toString()}}),c={accept:"application/json","accept-language":"en-GB,en-US;q=0.9,en;q=0.8",authorization:"Bearer ".concat(r),"cache-control":"no-cache","content-type":"application/json",pragma:"no-cache","sec-fetch-mode":"cors","sec-fetch-site":"same-origin","x-pydio-language":"en-us"},fetch(o,{method:"POST",mode:"cors",headers:c,body:a}).then((function(e){if(!e.ok)throw new Error("HTTP error! Status: ".concat(e.status));return e.json()})).then((function(e){console.info("Preservation config initiated successfully")})).catch((function(e){console.error("Fetch error:",e)}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){return s.apply(this,arguments)}function s(){return(s=i(t().mark((function e(){var n,r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(window.location.origin,"/api/preservation"),e.next=3,PydioApi._PydioRestClient.getOrUpdateJwt();case 3:return r=e.sent,e.abrupt("return",fetch(n,{headers:{Authorization:"Bearer ".concat(r)},method:"GET"}).then((function(e){if(!e.ok)throw new Error("HTTP error! Status: ".concat(e.status));return e.json()})).then((function(e){sessionStorage.setItem("preservationConfigs",JSON.stringify(e))})).catch((function(e){console.error("Fetch error:",e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e,t,n){var r=document.createElement("div");r.id="preservationConfigsSubMenu",r.style.maxHeight="8em",r.style.overflowY="scroll",r.innerHTML=t,n.forEach((function(e){var t=document.createElement("div"),n=JSON.parse(localStorage.getItem(e.id));if(t.style.transition="0.3s ease all",t.addEventListener("mouseenter",(function(e){e.target.style.background="var(--md-sys-color-outline-variant-50)"})),t.addEventListener("mouseleave",(function(e){e.target.style.background="none"})),t.addEventListener("click",(function(t){t.target.classList.contains("mdi-star-outline")?(console.info("bookmarked!"),localStorage.setItem(e.id,JSON.stringify({name:e.name,bookmarked:!0})),t.target.classList.remove("mdi-star-outline"),t.target.classList.add("mdi-star"),r.remove()):t.target.classList.contains("mdi-star")?(console.info("un-bookmarked!"),localStorage.setItem(e.id,JSON.stringify({name:e.name,bookmarked:!1})),t.target.classList.remove("mdi-star"),t.target.classList.add("mdi-star-outline"),r.remove()):(!function(e){a.apply(this,arguments)}(e.id),r.remove())})),t.innerHTML='<span role="menuitem" tabindex="0" style="border: 10px; box-sizing: border-box; display: block; font-family: Roboto, sans-serif; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); cursor: pointer; text-decoration: none; margin: 0px; padding: 0px; outline: none; font-size: 15px; font-weight: inherit; position: relative; color: var(--md-sys-color-inverse-surface); line-height: 32px; transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms; min-height: 32px; white-space: nowrap; background: none;width:inherit;"><div style="width:inherit;"><div style="width:inherit;margin-left: 24px; position: relative; display:flex;align-content: center;flex-wrap: nowrap;flex-direction: row;align-items: center;justify-content: flex-start;"><div role="menuLabel" style="max-width:8em;overflow-x:clip;text-overflow:ellipsis;">Source Editor</div><span class="mdi mdi-star-outline menu-icons" color="#757575" style="color: rgb(117, 117, 117);font-size: 16px; display: block; user-select: none; transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms; height: 24px; width: 24px;padding: 5px; padding-left:10px; position:absolute; right:24px"></span></div></div></span>',t.querySelector('[role="menuLabel"]').innerText=e.name,r.querySelector('[role="menu"]').appendChild(t),n&&n.bookmarked){var o=t.querySelector(".mdi-star-outline");o.classList.remove("mdi-star-outline"),o.classList.add("mdi-star")}}));var o=document.createElement("div");o.innerHTML='<span role="menuitem" tabindex="0" style="border: 10px; box-sizing: border-box; display: block; font-family: Roboto, sans-serif; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); cursor: pointer; text-decoration: none; margin: 0px; padding: 0px; outline: none; font-size: 15px; font-weight: inherit; position: relative; color: var(--md-sys-color-inverse-surface); line-height: 32px; transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms; min-height: 32px; white-space: nowrap; background: none;width:inherit;"><div style="width:inherit;"><div style="width:inherit;margin-left: 24px; position: relative; display:flex;align-content: center;flex-wrap: nowrap;flex-direction: row;align-items: center;justify-content: flex-start;"><div role="menuLabel" style="max-width:8em;overflow-x:clip;text-overflow:ellipsis;">Source Editor</div></div></div></span>',o.querySelector('[role="menuLabel"]').innerText="Create New",o.style.transition="0.3s ease all",o.addEventListener("mouseenter",(function(e){e.target.style.background="var(--md-sys-color-outline-variant-50)"})),o.addEventListener("mouseleave",(function(e){e.target.style.background="none"})),o.addEventListener("click",(function(e){document.querySelector("#preservationConfigsSubMenu").remove(),function(e,t){var n=document.createElement("div");n.classList.add("config-modal-container");var r=document.createElement("div");r.classList.add("config-modal-scroll-container");var o=document.createElement("div");o.classList.add("config-modal-content");var i=document.createElement("div");i.textContent=e,i.classList.add("config-popup-title"),o.appendChild(i);var a=document.createElement("div");a.classList.add("config-main-options-container"),o.appendChild(a),t.forEach((function(e){var t=document.createElement("div");t.classList.add("config-input-category"),t.id=e.category.replaceAll(" ","_");var n=document.createElement("div");n.classList.add("config-text-label"),n.textContent=e.category,t.appendChild(n),e.inputs.forEach((function(e){p(e,t)})),r.appendChild(t)}));var s=document.createElement("button");s.classList.add("config-clear-form"),s.textContent="Clear Form",s.addEventListener("click",(function(e){r.querySelectorAll("input").forEach((function(e){"text"==e.type?e.value="":"checkbox"==e.type?e.checked=!1:e.value=0,e.dispatchEvent(new CustomEvent("change",{bubbles:!0})),e.dispatchEvent(new CustomEvent("input",{bubbles:!0}))}))})),r.appendChild(s);var l=document.createElement("div");l.classList.add("config-options-container"),l.style="display: flex;align-items: center;flex-wrap: nowrap;flex-direction: column;";var u=document.createElement("div");u.classList.add("config-text-label"),u.textContent="Create or Edit Configs",u.style="padding-bottom: 1em !important",l.appendChild(u),l.appendChild(r);var d=document.createElement("div");d.classList.add("config-modal-scroll-container");var h=document.createElement("button");h.classList.add("config-save-button"),h.textContent="Save Config",h.addEventListener("click",(function(e){var n=JSON.parse(sessionStorage.getItem("preservationConfigs")),r=l.querySelector("#name").value,o=t.flatMap((function(e){return e.inputs.map((function(e){return e.name})).concat(e.inputs.flatMap((function(e){return e.suboptions?e.suboptions.map((function(e){return e.name})):[]})))})),i={},a=null==n?void 0:n.find((function(e){return e.name==r}));a?i.id=a.id:i.user=pydio.user.id,o.forEach((function(e){var t=document.querySelector("#"+e);t&&"submit"!=t.type&&(t.disabled&&(i[e.toLowerCase()]=!1),"checkbox"==t.type?i[e.toLowerCase()]=+t.checked:t.querySelector("input[type='range']")?i[e.toLowerCase()]=t.querySelector("input[type='range']").value:"name"==e?i.name=t.value:"image_normalization_tiff"==e?i[e.toLowerCase()]="TIFF"===t.value?1:0:"string"==typeof t.value?i[e.toLowerCase()]=t.value.toLowerCase():i[e.toLowerCase()]=t.value)})),a?function(e){y.apply(this,arguments)}(i):function(e){return m.apply(this,arguments)}(i).then((function(e){if(e){var t=JSON.parse(sessionStorage.getItem("preservationConfigs"));c().then((function(e){var n=JSON.parse(sessionStorage.getItem("preservationConfigs"));if(i.id)document.querySelector("#config-"+i.id).remove(),f(d,[n.find((function(e){return e.id===i.id}))]);else{var r=n.find((function(e){return!t.some((function(t){return t.id===e.id}))}));f(d,[r])}}))}}))})),l.appendChild(h),a.appendChild(l),l.addEventListener("input",(function(e){var t=l.querySelector("#name").value;0==t.length?h.style.display="none":t.trim().length<3?(h.textContent="Add a name 3 characters or longer",h.style.display="block"):(h.textContent="Save Config",h.style.display="block")}));var v=document.createElement("div");v.classList.add("config-options-container"),v.id="savedConfigsContainer",v.style="display:flex;align-items:center;justify-content:flex-start;flex-direction:column;";var g=document.createElement("div");g.classList.add("config-text-label"),g.style="padding-bottom: 1em; !important",g.textContent="Saved Configs",v.appendChild(g);var b=JSON.parse(sessionStorage.getItem("preservationConfigs"));f(d,v,b),v.appendChild(d),a.appendChild(v),n.appendChild(o);var w=document.createElement("div");w.classList.add("action-buttons");var x=document.createElement("button");x.classList.add("config-modal-close-button"),x.textContent="Close",x.addEventListener("click",(function(){document.body.removeChild(n)})),w.appendChild(x),o.appendChild(w),document.body.appendChild(n),n.style.display="flex"}("Preservation Configs",v)})),r.querySelector('[role="menu"]').appendChild(o),document.body.appendChild(r);var i,s=r.firstChild.getBoundingClientRect(),l=e.getBoundingClientRect(),u=l.left,d=window.innerWidth-l.right;return u<d?(i=l.top,newRight=window.innerWidth-l.right,r.style.position="absolute",r.style.top="".concat(i,"px"),r.style.right="".concat(newRight,"px")):u>d?(i=l.top,newRight=window.innerWidth-l.left+s.width,r.style.position="absolute",r.style.top="".concat(i,"px"),r.style.right="".concat(newRight,"px")):(i=l.top,newRight=window.innerWidth-l.right,r.style.position="absolute",r.style.top="".concat(i,"px"),r.style.right="".concat(newRight,"px")),r}function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"16px",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"5px",o=document.createElement("div");return o.style.transition="0.3s ease all",o.style.maxWidth="20em",o.addEventListener("mouseenter",(function(e){e.target.style.background="var(--md-sys-color-outline-variant-50)"})),o.addEventListener("mouseleave",(function(e){e.target.style.background="none"})),o.id="preservationConfigDropdown",o.innerHTML='<span role="menuitem" tabindex="0" style="border: 10px; box-sizing: border-box; display: block; font-family: Roboto, sans-serif; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); cursor: pointer; text-decoration: none; margin: 0px; padding: 0px; outline: none; font-size: 15px; font-weight: inherit; position: relative; color:  color: var(--md-sys-color-inverse-surface); line-height: 32px; transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms; min-height: 32px; white-space: nowrap; background: none;"><div><div style="margin-left: 0px; padding: 0px 64px 0px 24px; position: relative;"><span class="mdi '+t+' menu-icons" color="#757575" style="color: rgb(117, 117, 117); position: absolute; font-size:'+n+";display: block; user-select: none; transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms; height: 24px; width: 24px; top: 4px; margin: 0px; right: 24px; fill: rgb(117, 117, 117); padding: "+r+';"></span><div role="menuLabel" style="overflow-x:clip;text-overflow:ellipsis;">'+e+"</div></div></div></span>",o}function d(e){var t=JSON.parse(sessionStorage.getItem("preservationConfigs"));setTimeout((function(){var r,o=n(e.querySelectorAll("div"));try{var i,a=function(){var n=r.value;if("Preserve"==n.innerText){var o=u("Preservation Configs","mdi-menu-right","24px","0px");e.insertBefore(o,n.nextSibling);var i=document.querySelector("#preservationConfigDropdown"),a=[1,3];return document.addEventListener("mousedown",(function(e){}),{once:!0}),i.addEventListener("click",(function(e){var n=l(i,'<div style="color: var(--md-sys-color-inverse-surface); background-color: transparent; transition: transform 250ms cubic-bezier(0.23, 1, 0.32, 1) 0ms, opacity 250ms cubic-bezier(0.23, 1, 0.32, 1) 0ms; box-sizing: border-box; font-family: Roboto, sans-serif; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); box-shadow: rgba(0, 0, 0, 0.12) 0px 1px 6px, rgba(0, 0, 0, 0.12) 0px 1px 4px; border-radius: 20px; position: fixed; z-index: 2100; opacity: 1; transform: scale(1, 1); transform-origin: left top; max-height: 963px; overflow-y: auto;"><div style="max-height: 100%; overflow-y: auto; transform: scaleX(1); opacity: 1; transform-origin: left top; transition: transform 250ms cubic-bezier(0.23, 1, 0.32, 1) 0ms, opacity 250ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;"><div style="opacity: 1; transform: scaleY(1); transform-origin: left top; transition: transform 500ms cubic-bezier(0.23, 1, 0.32, 1) 0ms, opacity 500ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;"><div role="presentation" style="z-index: 1000; position: relative; width: 192px;max-height:10em;"><div role="menu" style="padding: 16px 0px; display: table-cell; user-select: none; width: 192px;"></div></div></div></div></div>',t);setTimeout((function(){document.addEventListener("mousedown",(function(e){a.includes(e.which)&&(n.contains(e.target)||n.remove())}),{once:!0})}),100)})),t.forEach((function(t){var r=JSON.parse(localStorage.getItem(t.id.toString()));if(r&&r.bookmarked){var o=u(t.name,"mdi-console");e.insertBefore(o,n.nextSibling)}})),{v:void 0}}document.querySelector("#preservationConfigDropdown")&&document.querySelector("#preservationConfigDropdown").remove()};for(o.s();!(r=o.n()).done;)if(i=a())return i.v}catch(e){o.e(e)}finally{o.f()}}),10)}function f(e,t,n){console.log(n),null==n||n.forEach((function(t){var n=document.createElement("div");n.id="config-"+t.id,n.classList.add("saved-config-item"),n.style.opacity="0",n.addEventListener("mouseenter",(function(e){n.style.backgroundColor="var(--md-sys-color-outline-variant)"})),n.addEventListener("mouseleave",(function(e){n.style.backgroundColor="var(--md-sys-color-on-secondary)"})),n.addEventListener("click",(function(e){if(!["saved-config-delete","config-bookmark-container","mdi-star","mdi-star-outline"].includes(e.target.className))for(var n in t)if(t.hasOwnProperty(n)){var r="#"+n,o=document.querySelector(r);o&&("checkbox"==o.type?o.checked=!!t[n]:"select-one"==o.type?"image_normalization_tiff"==o.id&&(o.value=1===t[n]?"TIFF":"JPEG2000"):"range"==o.type?(o.value=t[n],o.dispatchEvent(new CustomEvent("input",{bubbles:!0}))):o.value=t[n],o.dispatchEvent(new CustomEvent("change",{bubbles:!0})))}}));var r=document.createElement("div");r.classList.add("saved-config-information");var o=document.createElement("label");o.textContent=t.name,o.style.fontWeight="500",o.style.marginBottom="0";var i=document.createElement("label");i.classList.add("config-text-label");var a=document.createElement("div"),c=document.createElement("label");c.for="config-description-"+t.id,c.textContent="Description: ";var s=document.createElement("span");s.textContent=t.description,s.id="config-description-"+t.id,a.appendChild(c),a.appendChild(s);var l=document.createElement("div"),u=document.createElement("label");u.id="config-user-"+t.id,u.textContent="User: ";var d=document.createElement("span");d.id="config-user-"+t.id,d.textContent=t.user,l.appendChild(u),l.appendChild(d),i.appendChild(a),i.appendChild(l),r.appendChild(o),r.appendChild(i);var f=document.createElement("button");f.classList.add("saved-config-delete"),f.addEventListener("mouseenter",(function(e){n.style.backgroundColor="var(--md-sys-color-on-secondary)",f.style.backgroundColor="#ff2c2c"})),f.addEventListener("mouseleave",(function(e){f.style.backgroundColor="var(--md-sys-color-error-container)",e.toElement==n||e.toElement==n.querySelector(".saved-config-information")?n.style.backgroundColor="var(--md-sys-color-outline-variant)":n.style.backgroundColor="var(--md-sys-color-on-secondary)"})),f.addEventListener("click",(function(e){confirm("Deleting a config is permanent and cannot be reverted, do you wish to continue?")&&(n.style.opacity="1",function(e){return h.apply(this,arguments)}(t.id).then((function(e){console.info("Delete successful:",e),n.style.animation="none",n.offsetWidth,n.style.animation="config-slide-and-fade-in 0.4s forwards reverse",setTimeout((function(e){n.remove()}),400)})).catch((function(e){n.style.animation="delete-failed-shake-animation 0.5s 0s infinite";var t=n.style.backgroundColor;n.style.backgroundColor="red",console.error("Delete failed:",e),setTimeout((function(){n.style.animation="none",n.style.backgroundColor=t}),500)})))})),f.textContent="Delete Config";var p=document.createElement("div");p.classList.add("config-bookmark-container"),p.addEventListener("click",(function(e){e.target.classList.contains("mdi-star-outline")?(console.info("bookmarked!"),localStorage.setItem(t.id,JSON.stringify({name:t.name,bookmarked:!0})),e.target.classList.remove("mdi-star-outline"),e.target.classList.add("mdi-star")):e.target.classList.contains("mdi-star")&&(console.info("un-bookmarked!"),localStorage.setItem(t.id,JSON.stringify({name:t.name,bookmarked:!1})),e.target.classList.remove("mdi-star"),e.target.classList.add("mdi-star-outline"))}));var m=document.createElement("span"),y=JSON.parse(localStorage.getItem(t.id.toString()));y&&y.bookmarked?m.classList.add("mdi-star"):m.classList.add("mdi-star-outline"),p.appendChild(m),n.appendChild(p),n.appendChild(r),n.appendChild(f),e.appendChild(n)}));var r=e.querySelectorAll(".saved-config-item");if(null==r||r.forEach((function(e,t){return e.style.animationDelay="".concat(.55*t/r.length,"s")})),null==r||r.forEach((function(e,t,n){var r=.05*(t+1),o=1-r;e.style.animationDelay="".concat(r,"s"),e.style.animationDuration="".concat(o,"s")})),!n||0==(null==n?void 0:n.length)){var o=document.createElement("div");o.textContent="No Saved Preservation Configs Found",o.style.margin="3em",o.style.width="80%",o.style.height="10%",o.style.textAlign="center",o.style.display="flex",o.style.color="white",o.style.background="var(--md-sys-color-outline-variant-50)",o.style.justifyContent="center",o.style.alignItems="center",o.style.borderRadius="1.5em",t.appendChild(o)}}function p(e,t){var n=document.createElement("div");if(n.classList.add("input-container"),"info"===e.type){var r=document.createElement("div");r.classList.add("config-info"),r.textContent=e.text,n.appendChild(r)}if("text"===e.type){var o=document.createElement("label");o.textContent=e.label,o.classList.add("config-text-label");var i=document.createElement("input");i.id=e.name,i.setAttribute("type","text"),i.classList.add("config-text-input"),n.appendChild(o),n.appendChild(i)}else if("toggle"===e.type){var a=document.createElement("label");a.textContent=e.label,a.classList.add("config-text-label");var c=document.createElement("input");c.setAttribute("type","checkbox"),c.classList.add("tgl"),c.classList.add("tgl-light"),c.id=e.name;var s=document.createElement("label");s.classList.add("tgl-btn"),s.htmlFor=e.name,n.appendChild(a),n.appendChild(c),n.appendChild(s)}else if("dropdown"===e.type){var l=document.createElement("label");l.textContent=e.label,l.classList.add("config-text-label");var u=document.createElement("select");u.id=e.name,u.classList.add("config-dropdown-select"),e.options.forEach((function(e){var t=document.createElement("option");t.value=e,t.textContent=e,u.appendChild(t)})),n.appendChild(l),n.appendChild(u)}else if("slider"==e.type){var d=document.createElement("label");d.textContent=e.label,d.classList.add("config-text-label");var f=document.createElement("div");f.classList.add("config-slider-container");var h=document.createElement("div");h.classList.add("config-slider-value"),h.textContent=e.min;var m=document.createElement("input");m.id=e.name,m.setAttribute("type","range"),m.classList.add("config-slider"),m.setAttribute("min",e.min),m.setAttribute("max",e.range),m.setAttribute("step",e.step),m.setAttribute("value",e.min);var y=document.createElement("div");y.classList.add("config-slider-minmax-container");var v=document.createElement("span");v.classList.add("config-slider-minmax"),v.textContent=e.min;var g=document.createElement("span");g.classList.add("config-slider-minmax"),g.textContent=e.range,m.addEventListener("input",(function(){var e=m.value;h.textContent=e})),y.appendChild(v);for(var b=0;b<e.range-2;b++){var w=document.createElement("div");w.classList.add("config-slider-dot"),y.appendChild(w)}y.appendChild(g),f.appendChild(y),f.appendChild(h),f.appendChild(m),n.appendChild(d),n.appendChild(f)}e.suboptions&&n.addEventListener("change",(function(t){var n=e.name;t.target.id==n&&(t.target.checked?e.suboptions.forEach((function(e){if("info"!=e.type){var t="#"+e.name;document.querySelector(t).disabled=!1,document.querySelector(t).parentElement.style.opacity="1"}})):e.suboptions.forEach((function(e){if("info"!=e.type){var t="#"+e.name;document.querySelector(t).disabled=!0,document.querySelector(t).checked=!1,document.querySelector(t).parentElement.style.opacity="0.3"}})))})),t.appendChild(n),e.suboptions&&e.suboptions.forEach((function(e){p(e,n),setTimeout((function(t){if("info"!=e.type){var n="#"+e.name;document.querySelector(n).disabled=!0,document.querySelector(n).parentElement.style.opacity="0.3"}}),50)}))}function h(){return(h=i(t().mark((function e(n){var r,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(window.location.origin,"/preservation/").concat(n),e.next=3,PydioApi._PydioRestClient.getOrUpdateJwt();case 3:return o=e.sent,e.abrupt("return",fetch(r,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(o)}}).then((function(e){if(!e.ok)throw new Error("HTTP error! Status: ".concat(e.status));return e.json()})).then((function(e){if(e)return c(),e;throw new Error("Delete operation failed.")})).catch((function(e){console.error("Fetch error:",e),Curate.ui.modals.curatePopup({title:"Error",type:"error",content:"There was an error deleting your configuration. Please try again, or contact support if the problem persists."}).fire()})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=i(t().mark((function e(n){var r,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(window.location.origin,"/preservation"),e.next=3,PydioApi._PydioRestClient.getOrUpdateJwt();case 3:return o=e.sent,e.abrupt("return",fetch(r,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(n)}).then((function(e){if(e.ok)return console.info("config saved successfully"),e.json();throw new Error("HTTP error! Status: ".concat(e.status))})).catch((function(e){console.error("Fetch error:",e),Curate.ui.modals.curatePopup({title:"Error",type:"error",content:"There was an error saving your configuration. Please try again, or contact support if the problem persists."}).fire()})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=i(t().mark((function e(n){var r,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(window.location.origin,"/api/preservation/").concat(n.id),e.next=3,PydioApi._PydioRestClient.getOrUpdateJwt();case 3:return o=e.sent,e.abrupt("return",fetch(r,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(n)}).then((function(e){if(!e.ok)throw new Error("HTTP error while updating config, Status: ".concat(e.status));if(200==e.status)return console.info("config saved successfully"),e.json()})).catch((function(e){console.error("Fetch error:",e),Curate.ui.modals.curatePopup({title:"Error",type:"error",content:"There was an error saving your modified configuration. Please try again, or contact support if the problem persists."}).fire()})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=[{category:"Details",inputs:[{label:"Config Name",name:"name",type:"text"},{label:"Config Description",name:"description",type:"text"}]},{category:"Normalisation",inputs:[{label:"Normalise Objects",name:"normalize",type:"toggle",suboptions:[{label:"Image Normalisation Format",name:"image_normalization_tiff",type:"dropdown",options:["TIFF","JPEG2000"]}]}]},{category:"Dissemination",inputs:[{label:"Create Dissemination Package",name:"dip_enabled",type:"toggle",suboptions:[{label:"Dissemination Information",name:"dip_info",type:"info",text:"Create dissemination packages from AIPs generated by this config. Created DIPs will automatically be connected to the linked description of the source data. For this option to work, you must configure a connected AtoM instance."},{label:"Go to AtoM Configuration",name:"atom_config",type:"button",text:"Go to AtoM Configuration",onclick:function(e){Curate.ui.modals.curatePopup({title:"Connect to Your AtoM Instance"},{afterLoaded:function(e){var t=document.createElement("connect-to-atom");e.querySelector(".config-main-options-container").appendChild(t)}}).fire()}}]}]},{category:"Packaging and Compression",inputs:[{label:"AIP Packaging Type",name:"process_type",type:"dropdown",options:["standard","eark"]},{label:"Compress AIPs",name:"compress_aip",type:"toggle",suboptions:[{label:"Warning",name:"compression_warning",type:"info",text:"Compressing AIPs will make their contents unsearchable and prevent descriptive metadata from being reassociated with output objects. You can compress your AIPs for distribution or deep-storage while conserving the uncompressed AIP by right-clicking an AIP in a workspace."},{label:"Compression Algorithm",name:"compression_algorithm",type:"dropdown",options:["tar","tar_bzip2","tar_gzip","s7_copy ","s7_bzip2","s7_lzma"]},{label:"Compression Level",name:"compression_level",type:"slider",min:1,range:9,step:1}]}]},{category:"Transfer Options",inputs:[{label:"Generate Transfer Structure Report",name:"gen_transfer_struct_report",type:"toggle"},{label:"Document Empty Directories",name:"document_empty_directories",type:"toggle"},{label:"Extract Packages",name:"extract_packages",type:"toggle",suboptions:[{label:"Delete Packages After Extraction",name:"delete_packages_after_extraction",type:"toggle"}]}]}];window.addEventListener("load",(function(e){i(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return new Promise((function(n){var r=setInterval((function(){void 0!==window[e]&&(clearInterval(r),n(window[e]))}),t)}))},e.prev=1,e.next=4,n("PydioApi");case 4:e.sent,c(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("An error occurred:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))(),setTimeout((function(){document.addEventListener("mousedown",(function(e){document.querySelector('.context-menu [role="menu"]')&&document.querySelector('.context-menu [role="menu"]').contains(e.target)||document.querySelector(".main-files-list")&&(3==e.which&&document.querySelector(".main-files-list").contains(e.target)?document.querySelector('.context-menu [role="menu"]')&&!document.querySelector("#preservationConfigDropdown")?setTimeout((function(){d(document.querySelector('.context-menu [role="menu"]'))}),100):function(e){if(document.querySelector("#\\/recycle_bin")&&document.querySelector("#\\/recycle_bin").contains(e.target))document.querySelector("#preservationConfigDropdown")&&document.querySelector("#preservationConfigDropdown").remove();else{var t=new MutationObserver((function(e){e.forEach((function(e){e.addedNodes.forEach((function(e){if(e.nodeType===Node.ELEMENT_NODE){var n=e.querySelector('.context-menu [role="menu"]');n&&(d(n),t.disconnect())}}))}))}));t.observe(document.body,{childList:!0,subtree:!0,once:!0})}}(e):document.querySelector("#preservationConfigDropdown")&&setTimeout((function(){document.querySelector("#preservationConfigDropdown")&&document.querySelector("#preservationConfigDropdown").remove()}),150))}),150)}))}))},3744:()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(){"use strict";t=function(){return r};var n,r={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",l=c.asyncIterator||"@@asyncIterator",u=c.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(n){d=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var o=t&&t.prototype instanceof b?t:b,i=Object.create(o.prototype),c=new A(r||[]);return a(i,"_invoke",{value:T(e,n,c)}),i}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}r.wrap=f;var h="suspendedStart",m="suspendedYield",y="executing",v="completed",g={};function b(){}function w(){}function x(){}var E={};d(E,s,(function(){return this}));var k=Object.getPrototypeOf,C=k&&k(k(N([])));C&&C!==o&&i.call(C,s)&&(E=C);var L=x.prototype=b.prototype=Object.create(E);function S(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function _(t,n){function r(o,a,c,s){var l=p(t[o],t,a);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==e(d)&&i.call(d,"__await")?n.resolve(d.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):n.resolve(d).then((function(e){u.value=e,c(u)}),(function(e){return r("throw",e,c,s)}))}s(l.arg)}var o;a(this,"_invoke",{value:function(e,t){function i(){return new n((function(n,o){r(e,t,n,o)}))}return o=o?o.then(i,i):i()}})}function T(e,t,r){var o=h;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:n,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var s=P(c,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=y;var l=p(e,t,r);if("normal"===l.type){if(o=r.done?v:m,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=v,r.method="throw",r.arg=l.arg)}}}function P(e,t){var r=t.method,o=e.iterator[r];if(o===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=n,P(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=p(o,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,g;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,g):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,g)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function e(){for(;++o<t.length;)if(i.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=n,e.done=!0,e};return a.next=a}}throw new TypeError(e(t)+" is not iterable")}return w.prototype=x,a(L,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:w,configurable:!0}),w.displayName=d(x,u,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,d(e,u,"GeneratorFunction")),e.prototype=Object.create(L),e},r.awrap=function(e){return{__await:e}},S(_.prototype),d(_.prototype,l,(function(){return this})),r.AsyncIterator=_,r.async=function(e,t,n,o,i){void 0===i&&(i=Promise);var a=new _(f(e,t,n,o),i);return r.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(L),d(L,u,"Generator"),d(L,s,(function(){return this})),d(L,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},r.values=N,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,o){return c.type="throw",c.arg=e,t.next=r,o&&(t.method="next",t.arg=n),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:N(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),g}},r}function n(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function r(e){return function(){var t=this,r=arguments;return new Promise((function(o,i){var a=e.apply(t,r);function c(e){n(a,o,i,c,s,"next",e)}function s(e){n(a,o,i,c,s,"throw",e)}c(void 0)}))}}function o(){return o=r(t().mark((function e(n){var o,i,a,c,s,l,u,d=arguments;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=d.length>1&&void 0!==d[1]?d[1]:100,i=function(){var e=r(t().mark((function e(n){var r,i,a,c=arguments;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:0,i={NodePaths:[n+"/*"],Limit:o.toString(),Offset:r.toString()},e.next=4,Curate.api.fetchCurate("/a/tree/stats","POST",i);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=[],c=0,s=!0;case 5:if(!s){e.next=15;break}return e.next=8,i(n,c);case 8:l=e.sent,u=l.Nodes||[],a=a.concat(u),s=u.length===o,c+=u.length,e.next=5;break;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}document.addEventListener("change",(function(e){var t,n=this;if(1===pydio._dataModel._selectedNodes.length&&null!==(t=e.target.nextElementSibling)&&void 0!==t&&t.textContent.includes("Enable OAI Harvesting")&&"checkbox"===e.target.type){var r,i=null===(r=e.target.nextElementSibling)||void 0===r?void 0:r.textContent.includes("Enable OAI-PMH Harvesting"),a=pydio._dataModel._selectedNodes[0],c=!a._isLeaf;i&&c&&Curate.ui.modals.curatePopup({title:"Send Update to Children",buttonType:"okCancel"},{afterLoaded:function(e){e.querySelector(".config-main-options-container").appendChild(function(){var e=document.createElement("div");e.style="margin: 12px 0px 6px;";var t=document.createElement("div");t.style="cursor: pointer; position: relative; overflow: visible; display: table; height: 52px; width: 100%; background-color: var(--md-sys-color-surface-variant); border-radius: 4px; margin-top: 8px; font-size: 15px; padding: 15px 10px 4px;";var n=document.createElement("input");n.type="checkbox",n.id="inheritValues",n.checked=!1,n.style="position: absolute; cursor: inherit; pointer-events: all; opacity: 0; width: 100%; height: 100%; z-index: 2; left: 0px; box-sizing: border-box; padding: 0px; margin: 0px;";var r=document.createElement("div");r.style="display: flex; width: 100%; height: 100%;";var o=document.createElement("div");o.style="transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms; float: left; position: relative; display: block; flex-shrink: 0; width: 36px; margin-right: 8px; margin-left: 0px; padding: 4px 0px 6px 2px;";var i=document.createElement("div");i.style="transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms; width: 100%; height: 14px; border-radius: 30px; background-color: var(--md-sys-color-outline-variant);";var a=document.createElement("div");a.style="color: rgb(25, 28, 30); background-color: var(--md-sys-color-primary); transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms; box-sizing: border-box; font-family: Roboto, sans-serif; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); box-shadow: rgba(0, 0, 0, 0.12) 0px 1px 6px, rgba(0, 0, 0, 0.12) 0px 1px 4px; border-radius: 50%; position: absolute; top: 1px; left: 100%; width: 20px; height: 20px; line-height: 24px; margin-left: -20px;";var c=document.createElement("label");return c.style="float: left; position: relative; display: block; width: calc(100% - 46px); line-height: 24px; color: rgb(25, 28, 30); font-family: Roboto, sans-serif;",c.textContent="Update Children With New Value ",o.appendChild(i),o.appendChild(a),r.appendChild(o),r.appendChild(c),t.appendChild(n),t.appendChild(r),e.appendChild(t),n.addEventListener("change",(function(){n.checked?(i.style.backgroundColor="rgba(0, 102, 137, 0.5)",a.style.left="100%",c.textContent="Update Children With New Value (yes)"):(a.style.left="55%",i.style.backgroundColor="var(--md-sys-color-outline-variant)",c.textContent="Update Direct Descendant Files With New Value (no)")})),n.dispatchEvent(new Event("change")),e}())},onOk:function(){var t=n.querySelector("#inheritValues[type='checkbox']");t&&t.checked&&function(e){return o.apply(this,arguments)}(Curate.workspaces.getOpenWorkspace()+"/"+a._path).then((function(t){var n,r,o=[];t.forEach((function(e){return"LEAF"===e.Type?o.push(e.Uuid):null})),(n=o,r=50,Array.from({length:Math.ceil(n.length/r)},(function(e,t){return n.slice(t*r,t*r+r)}))).forEach((function(t){var n=function(e,t){return{MetaDatas:e.map((function(e){return{NodeUuid:e,Namespace:"usermeta-export-oai-harvest-enabled",JsonValue:t.toString(),Policies:[{Action:"READ",Effect:"allow",Subject:"*"},{Action:"WRITE",Effect:"allow",Subject:"*"}]}})),Operation:"PUT"}}(t,e.target.checked);Curate.api.fetchCurate("/a/user-meta/update","PUT",n)}))})).catch((function(e){console.error("Error retrieving nodes:",e)}))}}).fire()}}))},3290:()=>{function e(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var n={upload:{enforceWorkspaceUpload:{event:"drop",target:document,description:"enforce workspace upload permissions for standard users",handler:function(e){pydio.user.getIdmUser().then((function(t){var n;if(!["quarantine","personal-files","common files"].includes(Curate.workspaces.getOpenWorkspace())&&!t.Roles.find((function(e){return e.Label="Admin"}))&&(null===(n=e.dataTransfer)||void 0===n?void 0:n.files.length)>0){e.stopImmediatePropagation();Curate.ui.modals.curatePopup({title:"You do not have permission to upload to this workspace",type:"warning",content:"<div>\n                            <p>Please upload your content to the Quarantine workspace instead. This will ensure your content is correctly scanned for malware before being released into the system.</p>\n                            <p>You can also upload your content to the Personal and Common Files workspaces, which is scanned for malware once but will not be quarantined and cannot be released into the system.</p>\n                        </div>"}).fire()}}))}}},sharedSite:{enforceNoCustomActions:{event:"readystatechange",target:document,description:"enforce no custom actions for shared sites",handler:function(e){if(console.log("shared site enforce no custom actions"),window.location.pathname.includes("/public/"),window.location.pathname.includes("/public/")){var t=document.querySelector(".toolbars-button-menu.action-group_more_action"),n=Array.from(document.querySelector("#main-toolbar").children).find((function(e){return"button"===e.type&&e.querySelector(".action-local_toggle_theme")})),r=Array.from(document.querySelectorAll(".toolbars-button-menu")).find((function(e){return 1==e.classList.length}));t&&t.remove(),n&&n.remove(),r&&r.remove()}}}},move:{}};document.addEventListener("DOMContentLoaded",(function(t){var r;r=n,Object.entries(r).forEach((function(t){var n=e(t,2),o=n[0],i=n[1];Object.entries(i).forEach((function(t){var n=e(t,2),i=n[0],a=n[1],c=a.event,s=a.target,l=a.handler;console.log("attaching event handler",r[o][i]);try{s.addEventListener(c,l)}catch(e){console.error("could not attach: ",r[o][i])}}))}))}))},4346:()=>{var e=[function(e){var t;return null===(t=e.querySelector(".icomoon-cells"))||void 0===t?void 0:t.closest("button")},function(e){return e.querySelector(".layout-fill")}];window.addEventListener("load",(function t(){var n;if(window.location.pathname.includes("/login")){var r=new MutationObserver((function(){window.location.pathname.includes("/login")||(r.disconnect(),t())}));r.observe(document.documentElement,{childList:!0,subtree:!0})}else null!==(n=pydio)&&void 0!==n&&n.user?(pydio.user.isAdmin||pydio.observe("context_changed",(function(t){if("Settings"===t._label){var n=new MutationObserver((function(){var t=!1;e.forEach((function(e){var n=e(document);n&&(n.remove(),t=!0)})),t&&n.disconnect()}));n.observe(document.body,{childList:!0,subtree:!0})}})),window.removeEventListener("load",t)):setTimeout(t,100)}))},695:()=>{function e(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=n(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}function t(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var o=function(e){try{return pydio._dataModel._selectedNodes[0]._metadata.get(e)||null}catch(e){return null}},i=function(e,t,n,r){var o=Curate.workspaces.getOpenWorkspace();return n&&"File has not been scanned"!=e||"quarantine"!=o||"Scan Limit Exceeded"===n?n&&"File has not been scanned"!=e||"quarantine"===o||"Scan Limit Exceeded"===n?"Quarantined"==n?"File in quarantine, current period: ".concat(function(e){return Math.floor((new Date-new Date(e))/864e5)}(r)," days."):"Scan Limit Exceeded"==n?"File is too large to be scanned.":"Passed"!=n||"personal-files"!=o&&"common files"!=o?"Passed"==n?"File has passed an initial scan but will not be scanned again, please move it into the Quarantine workspace.":"Released"==n?"File has been released from quarantine.":"Risk"==n?"File has not completed its quarantine period and is at risk.":void 0:"File has passed the ".concat(o.replace("-"," ")," scan."):"This file has not been scanned and is at risk. Please move it into the Quarantine workspace to be scanned.":"This file has not been scanned and is at risk."},a=function(e,t){var n=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=document.createElement("div");return r.className=e,r.textContent=t,Object.assign(r.style,n),r},r=n("infoPanelRow",null,{padding:"0px 16px 6px"}),o=n("infoPanelLabel",e,{fontWeight:"415"}),i=n("infoPanelValue",t);return r.appendChild(o),r.appendChild(i),r};function c(e){var n,r,c=null!==(n=null===(r=o("files"))||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.matches)||void 0===r||null===(r=r[0])||void 0===r?void 0:r.id)&&void 0!==n?n:"File has not been characterised",s=["usermeta-virus-scan-first","usermeta-virus-scan-second"].map((function(e){return o(e)||"File has not been scanned"})),l=pydio._dataModel._selectedNodes[0]._metadata.get("etag");l.endsWith("-1")&&(l="Local hash");var u=o("mime"),d=o("usermeta-virus-scan"),f=o("usermeta-virus-scan-passed-date"),p=i.apply(void 0,t(s).concat([d,f]));setTimeout((function(){var t=document.createElement("div");t.style.marginTop="-11px",t.id="curateAdditionalInfo";var n=a("Pronom ID",c);"File has not been characterised"!==c&&(n.style.cursor="pointer",n.style.transition="all 0.2s ease-in-out",n.addEventListener("mouseenter",(function(e){n.style.textDecoration="underline",n.style.backgroundColor="rgba(153, 153, 153, 0.2)"})),n.addEventListener("mouseleave",(function(e){n.style.textDecoration="none",n.style.backgroundColor="transparent"})),n.addEventListener("click",(function(e){window.open("https://www.nationalarchives.gov.uk/pronom/".concat(c))})));var r=a("First virus scan result",s[0]),o=a("Second virus scan result",s[1]),i=(a("Mimetype",u),a("Status",p));e.querySelector(".panelContent").childNodes.forEach((function(e){e.innerText.includes("ETag")&&(e.firstChild.innerText="Checksum",e.querySelector(".infoPanelValue").innerText=l)}));var d,f=document.createElement("HR"),h=document.createElement("div"),m=document.createElement("div");m.style.marginBottom="5px",h.textContent="Quarantine Info",h.id="quarantineInfoLabel",h.style.color="rgb(77, 122, 143)",h.style.fontSize="14px",h.style.fontWeight="500",h.style.marginLeft="15px",h.style.marginBottom="10px",t.appendChild(n),t.appendChild(f),t.appendChild(h),t.appendChild(i),t.appendChild(r),t.appendChild(o),t.appendChild(m),e.querySelector("#curateAdditionalInfo")?(null===(d=Array.from(document.querySelectorAll(".panelCard")).find((function(e){return e.textContent.includes("File Info")})))||void 0===d||null===(d=d.querySelector("#curateAdditionalInfo"))||void 0===d||d.remove(),e.appendChild(t)):e.appendChild(t)}),5)}var s,l=function(e,t){t=Array.from(document.querySelectorAll(".panelCard")).find((function(e){return e.textContent.includes("File Info")}));e.memo._selectedNodes&&0!=e.memo._selectedNodes.length&&e.memo._selectedNodes[0]!=s&&t&&t.querySelector(".panelContent")&&(c(t),s=e.memo._selectedNodes[0])},u=function(t){if(t)return pydio._dataModel._observers.selection_changed.includes(l)||pydio._dataModel.observe("selection_changed",(function(e){l(e)})),t.firstElementChild.addEventListener("click",(function(e){t.querySelector('[class*="mdi-chevron-"]').classList.contains("mdi-chevron-up")||t.querySelector('[class*="mdi-chevron-"]').classList.contains("mdi-chevron-down")})),function(t,n){if(!t||!t.parentElement)return void console.error("The element or its parent is not defined.");var r=new MutationObserver((function(o){var i,a=e(o);try{for(a.s();!(i=a.n()).done;){var c=i.value;if(c.removedNodes.length){var s,l=e(c.removedNodes);try{for(l.s();!(s=l.n()).done;){var u=s.value;if(u===t||u.contains(t))return n(),void r.disconnect()}}catch(e){l.e(e)}finally{l.f()}}}}catch(e){a.e(e)}finally{a.f()}}));r.observe(t.parentElement,{childList:!0,subtree:!0})}(t.querySelector(".panelContent"),(function(){t.querySelector("#curateAdditionalInfo").remove()})),void(t.querySelector(".panelContent")&&c(t))};new MutationObserver((function(t,n){var r,o=e(t);try{for(o.s();!(r=o.n()).done;){var i=r.value;if("childList"===i.type){var a,c=e(i.addedNodes);try{for(c.s();!(a=c.n()).done;){var s=a.value;s instanceof HTMLElement&&s.classList.contains("panelCard")&&s.innerText.includes("File Info")?u(s):s instanceof HTMLElement&&s.classList.contains("panelContent")&&s.parentElement.classList.contains("panelCard")&&s.parentElement.innerText.includes("File Info")&&u(s.parentElement)}}catch(e){c.e(e)}finally{c.f()}}}}catch(e){o.e(e)}finally{o.f()}})).observe(document.documentElement,{childList:!0,subtree:!0})},9710:()=>{window.addEventListener("load",(function(){new Promise((function(e,t){!function t(){"undefined"!=typeof pydio?e():setTimeout(t,100)}()})).then((function(){pydio._dataModel.observe("selection_changed",(function(e){setTimeout((function(){var e=document.querySelector("#info_panel > div");e&&e.scrollTo({top:0,left:0})}),50)}))}))}))},4652:()=>{var e=window.curateDistrobution||"Soteria+";window.addEventListener("load",(function t(){console.log("message modifier");var n=pydioBootstrap.parameters.get("i18nMessages");Object.keys(n).forEach((function(t){"string"==typeof n[t]&&(n[t]=n[t].replace(/Pydio\s*Cells/gi,e).replace(/(?<!Pydio\s*)Cells/gi,e))})),window.removeEventListener("load",t)}))},6626:()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(){"use strict";t=function(){return r};var n,r={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",l=c.asyncIterator||"@@asyncIterator",u=c.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(n){d=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var o=t&&t.prototype instanceof b?t:b,i=Object.create(o.prototype),c=new A(r||[]);return a(i,"_invoke",{value:T(e,n,c)}),i}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}r.wrap=f;var h="suspendedStart",m="suspendedYield",y="executing",v="completed",g={};function b(){}function w(){}function x(){}var E={};d(E,s,(function(){return this}));var k=Object.getPrototypeOf,C=k&&k(k(N([])));C&&C!==o&&i.call(C,s)&&(E=C);var L=x.prototype=b.prototype=Object.create(E);function S(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function _(t,n){function r(o,a,c,s){var l=p(t[o],t,a);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==e(d)&&i.call(d,"__await")?n.resolve(d.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):n.resolve(d).then((function(e){u.value=e,c(u)}),(function(e){return r("throw",e,c,s)}))}s(l.arg)}var o;a(this,"_invoke",{value:function(e,t){function i(){return new n((function(n,o){r(e,t,n,o)}))}return o=o?o.then(i,i):i()}})}function T(e,t,r){var o=h;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:n,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var s=P(c,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=y;var l=p(e,t,r);if("normal"===l.type){if(o=r.done?v:m,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=v,r.method="throw",r.arg=l.arg)}}}function P(e,t){var r=t.method,o=e.iterator[r];if(o===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=n,P(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=p(o,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,g;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,g):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,g)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function e(){for(;++o<t.length;)if(i.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=n,e.done=!0,e};return a.next=a}}throw new TypeError(e(t)+" is not iterable")}return w.prototype=x,a(L,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:w,configurable:!0}),w.displayName=d(x,u,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,d(e,u,"GeneratorFunction")),e.prototype=Object.create(L),e},r.awrap=function(e){return{__await:e}},S(_.prototype),d(_.prototype,l,(function(){return this})),r.AsyncIterator=_,r.async=function(e,t,n,o,i){void 0===i&&(i=Promise);var a=new _(f(e,t,n,o),i);return r.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(L),d(L,u,"Generator"),d(L,s,(function(){return this})),d(L,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},r.values=N,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,o){return c.type="throw",c.arg=e,t.next=r,o&&(t.method="next",t.arg=n),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:N(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),g}},r}function n(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function r(e){var t=document.createElement("div"),n=document.createElement("button"),r=document.createElement("span"),o=document.createElement("text"),i=document.createElement("hr");o.textContent=e,o.style.marginTop="1em",r.style.ariaHidden="true",r.innerHTML="&times;",n.style.ariaLabel="Close alert",n.style.type="button",n.style.backgroundColor="white",n.style.border="0",n.style.position="absolute",n.style.top="0",n.style.right="0",n.onclick=function(){this.parentNode.className="slideOut",setTimeout((function(){t.remove()}),1e3)},n.appendChild(r),t.style.backgroundColor="white",t.style.borderRadius="0.5em",t.style.width="16em",t.style.height="auto",t.style.padding="1.8em",t.style.paddingBottom="0em",t.style.margin="2em",t.style.position="absolute",t.style.bottom="5em",t.style.right="0",t.style.boxShadow="0 10px 16px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19)",t.className="slideIn",i.style.borderTop="1px solid black",i.style.marginTop="1em",i.className="lineLoad",n.appendChild(r),t.appendChild(n),t.appendChild(o),t.appendChild(i),document.querySelector("body").appendChild(t),setTimeout((function(){t.classList.remove("slideIn")}),1e3),setTimeout((function(){t.className="slideOut",setTimeout((function(){t.remove()}),1e3)}),6e3)}var o=function(e){return new Promise((function(t){return setTimeout(t,e)}))};function i(){var e;return e=t().mark((function e(){var n,i,a,c,s,l,u,d;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=1;case 1:if(0===n){e.next=8;break}return e.next=4,o(100);case 4:null==document.querySelector("#workspace_toolbar")||(n=0,window.location.href.includes("/public/")&&(null==document.querySelector("#pydio_shared_folder")?((i=document.querySelector("#pydio_dropbox_template").firstElementChild.firstElementChild).style.backgroundColor="#9fd0c7",(a=i.firstElementChild).style.marginTop="1em",a.style.marginBottom="1em",a.style.marginLeft="1em",(c=document.querySelector(".segment")).textContent="Directory: "+c.textContent,r("Welcome to Curate, simply drag and drop files in to the dashed area to upload.")):((s=document.querySelector("#pydio_shared_folder").firstElementChild.firstElementChild).style.backgroundColor="#9fd0c7",(l=s.firstElementChild).style.marginTop="1em",l.style.marginBottom="1em",l.style.marginLeft="1em",u=pydio.Controller.actions.toJSON()[8][1].deny,d="Welcome to Curate, here you can view or download files shared with you by your collaborators.",r(0==u?d+" You can also create folders and upload new files.":d)))),e.next=1;break;case 8:case"end":return e.stop()}}),e)})),i=function(){var t=this,r=arguments;return new Promise((function(o,i){var a=e.apply(t,r);function c(e){n(a,o,i,c,s,"next",e)}function s(e){n(a,o,i,c,s,"throw",e)}c(void 0)}))},i.apply(this,arguments)}function a(){setTimeout((function(){for(var e=["Generate mimetype report","Export Archivematica JSON"],t=0;t<e.length;t++){var n="//div[text()='"+e[t]+"']";try{document.evaluate(n,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue.parentElement.parentElement.parentElement.parentElement.remove()}catch(e){}}}),1)}document.addEventListener("DOMContentLoaded",(function(){var e;!function(){i.apply(this,arguments)}();try{e=document.querySelector("#pydio_shared_folder")}catch(e){}e&&setTimeout((function(){document.querySelector(".toolbars-button-menu").addEventListener("click",a)}),3e3)}))},2123:()=>{window.addEventListener("load",(function(){var t=Object.fromEntries(pydioBootstrap.parameters).i18nMessages;Object.entries(e).forEach((function(e){t[e[0]]=e[1]}))}));var e={"ajax_gui.tour.welcomemodal.title":"Welcome to Curate","ajax_gui.tour.welcomemodal.subtitle":"Drag'n'drop a photo of you for your profile! This quick tour will guide you through the web interface.","ajax_gui.tour.welcomemodal.start":"Start the tour","ajax_gui.tour.workspaces.1":"Workspaces are top-level folders that help you manage your archiving workflow and organise your data. The Personal Files workspace can only be accessed by you and the Quarantine, Appraisal and Archive workspaces are shared with your workgroup. The Package Templates workspace is common to all accounts and is read only.","ajax_gui.tour.workspaces.2":"You can upload into the Personal Files and Quarantine workspaces, move files to Appraisal to work on them and deposit packages in the Archive when you are finished.","ajax_gui.tour.globsearch.title":"Global Search","ajax_gui.tour.globsearch.1":"Use this search form to find files or folders in any workspace. Only the first 5 results are shown, enter a workspace to get more results, and more search options. Tip: you can use an asterisk as a wild card.","ajax_gui.tour.globsearch.2":"When no search is entered, the history of your recently accessed files and folder is displayed instead.","ajax_gui.tour.openworkspace.title":"Open a workspace","ajax_gui.tour.openworkspace":"At the first connection, your history is probably empty. Enter the Personal or Quarantine workspaces to start adding files. Tip: files are virus checked when they are uploaded and should be kept in Quarantine for 30 days, after which they are scanned again.","ajax_gui.tour.create-menu.title":"Add files","ajax_gui.tour.create-menu":"Start adding new files or folders to the current workspace.","ajax_gui.tour.display-bar.title":"Display Options","ajax_gui.tour.display-bar":"This toolbar allows you to change the display: switch to thumbnails or detail mode depending on your usage, and sort files by name, date, etc...","ajax_gui.tour.infopanel.title":"Info Panel","ajax_gui.tour.infopanel.1":"Here, you will find a preview and comprehensive information about your current selection: file information, virus scan status, metadata, etc.","ajax_gui.tour.infopanel.2":"You can close this panel by using the info button in the display toolbar","ajax_gui.tour.uwidget.title":"User Settings","ajax_gui.tour.uwidget.addressbook":"Directory of all the users accessing to the platform. Create your own users, and constitute teams that can be used to share resources","ajax_gui.tour.uwidget.alerts":"Alerts panel will inform you when a user with whom you shared some resources did access it. They can be sent to you directly by email.","ajax_gui.tour.uwidget.menu":"Access to other options : manage your profile and password, view all of the public links you have created, send a support message, configure the Archivematica Connector and sign out of the platform.","ajax_gui.tour.uwidget.home":"Go back to the welcome panel with this button"}},1075:()=>{[{name:"he",url:"https://cdn.jsdelivr.net/npm/he@1.2.0/he.min.js"},{name:"swal",url:"https://cdn.jsdelivr.net/npm/sweetalert2@11"},{name:"papaparse",url:"https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"},{name:"chart.js",url:"https://cdn.jsdelivr.net/npm/chart.js"},{name:"spark-md5",url:"https://cdnjs.cloudflare.com/ajax/libs/spark-md5/3.0.2/spark-md5.min.js"}].forEach((function(e){var t=document.createElement("script");t.src=e.url,t.onerror=function(){console.error("Failed to load external library: ",e.name,"please reload the page or contact your admin if the issue persists.")},document.head.appendChild(t)}))}}]);